{
  "metadata": {
    "type": "always_apply",
    "description": "Core rules: per-step workflow, evidence-before-assertion, OCR verification, existing browser windows, ask don't guess",
    "version": "4.0"
  },
  "total_rules": 7,
  "rules": [
    {
      "rule_number": 0,
      "title": "Rule 0: Per-Step Workflow Pattern (META-RULE)",
      "content": "**PER STEP (not per task):** 1) State rules for THIS step, 2) Execute THIS step, 3) Show full evidence, 4) Verify compliance. **Forbidden:** Bulk execution, no evidence, claims without OCR, showing file size instead of screenshot."
    },
    {
      "rule_number": 2,
      "title": "Rule 2: Evidence-Before-Assertion",
      "content": "**No claims without proof:** Full terminal output, OCR verification (show FULL output), screenshots displayed to user (`code /tmp/screenshot.png` NOT `ls -lh`). **Forbidden:** \"I can see\", \"appears to work\" without OCR evidence."
    },
    {
      "rule_number": 5,
      "title": "Rule 5: Ask Don't Guess",
      "content": "**If ambiguous â†’ STOP and ask.** Format: CLARIFICATION NEEDED: Situation/Options/Question."
    },
    {
      "rule_number": 24,
      "title": "Rule 24: Test Before Push",
      "content": "**NEVER push broken code.** Before git push: 1) Run dev server, 2) Run Selenium (VISIBLE mode), 3) Verify 0 errors, 4) Show terminal output. If ANY fails, FIX first."
    },
    {
      "rule_number": 25,
      "title": "Rule 25: Display Debug in UI",
      "content": "**Add debug logs to UI, not just console.** User shouldn't have to open F12. Create debug panel in UI showing timestamps, log levels, data."
    },
    {
      "rule_number": 26,
      "title": "Rule 26: Use Existing Browser Window",
      "content": "**When user says \"page is open in firefox\":** 1) List ALL Firefox windows (`xdotool search --name \"Firefox\"`), 2) Find correct window by title (contains app name), 3) Activate THAT window by ID, 4) Verify with OCR. **Forbidden:** Creating new Selenium instances, activating wrong window."
    },
    {
      "rule_number": 27,
      "title": "Rule 27: Screenshot Claims Require OCR",
      "content": "**NEVER say \"I can see\" without:** 1) Running OCR, 2) Showing FULL OCR output, 3) Displaying screenshot to user, 4) Basing claims ONLY on OCR text. **Forbidden phrases without OCR:** \"I can see\", \"The screenshot shows\", \"The fix appears to be working\"."
    }
  ]
}

